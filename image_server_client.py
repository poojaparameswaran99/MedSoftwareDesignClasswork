from tkinter import filedialogimport base64import ioimport requestsfrom matplotlib import pyplot as pltimport matplotlib.image as mpimg# Select image to uploaddef select_image():    filename = filedialog.askopenfilename(initialdir = "Images")    return filename# convert image file to base64 stringdef convert_image_file_to_base64_string(filename):    with open(filename, "rb") as image_file:        b64_bytes = base64.b64encode(image_file.read())    b64_string = str(b64_bytes, encoding='utf-8')    return b64_string# Upload base64 string to server server = "http://vcm-21170.vm.duke.edu"# END POINT: POST/add_imagedef send_json_to_add_image(b64string, netid, tag_int):    image = {"image": b64string, "net_id": netid, "id_no": tag_int}    r_test = requests.post(server + "/add_image", json=image)    print(r_test.status_code)    return("The post request to /add_image had a status code of {} "           " and the following text: {}". format(r_test.status_code,                                                 r_test.text))# Download watermarked imagedef download_watermark_image():    r = requests.get(server + "/get_image/pkp14/22")    print(r.status_code)    print(r.text)    return (r.text)def view_b64_image(base64_string):    image_bytes = base64.b64decode(base64_string)    image_buf = io.BytesIO(image_bytes)    i = mpimg.imread(image_buf, format='JPG')    plt.imshow(i, interpolation='nearest')    plt.show()    returndef main():    filename = select_image()    if filename == "":        return    b64_image = convert_image_file_to_base64_string(filename)    send_json_to_add_image(b64_image, "pkp14", 22)    newpic = download_watermark_image()    view_b64_image(newpic)if __name__ == "__main__":    main()